<?php



if (! defined('ABSPATH')) exit;
// Define a function to handle the shortcode output


add_shortcode('all-nodes-maps', 'ikrwmap_shortcode_all_nodes_maps');

function ikrwmap_shortcode_all_nodes_maps($atts)
{
   // Start output buffering
   ob_start();
?>
   <main class="container-for-mobile-view all-node-map-container">
      <section class="map-section">
         <div class="map-overlay">
            <!-- main map container  -->
            <div class="ikr_svg_container all_node_map_width">
               <div id="ikr_map5" class="ikr_map5">
                  <div id="controls" class="controls">
                     <button id="fullscreen_btn" type="button" aria-label="Toggle fullscreen">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                           <polyline points="4 9 4 4 9 4"></polyline>
                           <polyline points="15 4 20 4 20 9"></polyline>
                           <polyline points="20 15 20 20 15 20"></polyline>
                           <polyline points="9 20 4 20 4 15"></polyline>
                        </svg>
                     </button>


                     <button id="zoom_in">
                        <svg
                           xmlns="http://www.w3.org/2000/svg"
                           width="16"
                           height="16"
                           viewBox="0 0 24 24"
                           fill="none"
                           stroke="currentColor"
                           stroke-width="2"
                           stroke-linecap="round"
                           stroke-linejoin="round"
                           aria-hidden="true"
                           focusable="false">
                           <line x1="12" y1="5" x2="12" y2="19"></line>
                           <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                     </button>
                     <button id="zoom_out">
                        <svg
                           xmlns="http://www.w3.org/2000/svg"
                           width="16"
                           height="16"
                           viewBox="0 0 24 24"
                           fill="none"
                           stroke="currentColor"
                           stroke-width="2"
                           stroke-linecap="round"
                           stroke-linejoin="round"
                           aria-hidden="true"
                           focusable="false">
                           <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                     </button>
                     <button id="reset">
                        <svg
                           xmlns="http://www.w3.org/2000/svg"
                           viewBox="0 0 640 640">
                           <path
                              d="M129.9 292.5C143.2 199.5 223.3 128 320 128C373 128 421 149.5 455.8 184.2C456 184.4 456.2 184.6 456.4 184.8L464 192L416.1 192C398.4 192 384.1 206.3 384.1 224C384.1 241.7 398.4 256 416.1 256L544.1 256C561.8 256 576.1 241.7 576.1 224L576.1 96C576.1 78.3 561.8 64 544.1 64C526.4 64 512.1 78.3 512.1 96L512.1 149.4L500.8 138.7C454.5 92.6 390.5 64 320 64C191 64 84.3 159.4 66.6 283.5C64.1 301 76.2 317.2 93.7 319.7C111.2 322.2 127.4 310 129.9 292.6zM573.4 356.5C575.9 339 563.7 322.8 546.3 320.3C528.9 317.8 512.6 330 510.1 347.4C496.8 440.4 416.7 511.9 320 511.9C267 511.9 219 490.4 184.2 455.7C184 455.5 183.8 455.3 183.6 455.1L176 447.9L223.9 447.9C241.6 447.9 255.9 433.6 255.9 415.9C255.9 398.2 241.6 383.9 223.9 383.9L96 384C87.5 384 79.3 387.4 73.3 393.5C67.3 399.6 63.9 407.7 64 416.3L65 543.3C65.1 561 79.6 575.2 97.3 575C115 574.8 129.2 560.4 129 542.7L128.6 491.2L139.3 501.3C185.6 547.4 249.5 576 320 576C449 576 555.7 480.6 573.4 356.5z" />
                        </svg>
                     </button>
                  </div>

                     
                  <svg id="inlineSvg"
                     xmlns="http://www.w3.org/2000/svg"
                     xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 309.84 434.4">
                     <defs>
                        <style>
                           .cls-1 {
                              fill: #fff;
                              stroke: #fff;
                              stroke-linejoin: round;
                              stroke-width: .5px;
                              fill-opacity: .1;
                           }
                        </style>
                     </defs>
                     <g id="stage">
                        <image width="1291" height="1810" transform="scale(.24)" xlink:href="<?php echo esc_url(plugins_url('../assets/images/20-01.png', __FILE__)); ?>" />
                        <polygon id="node_2" class="cls-1 anim-path" points="299.51 63.93 285.65 85.92 283.91 90.6 281.79 100.66 279.32 106.23 240.06 73.37 222.88 73.21 222.86 72.84 222.26 73.21 222.88 73.21 222.88 73.22 184.9 72.79 175.96 19.38 223.34 17.47 223.62 27.67 222.44 40.58 224.03 42.26 234.1 43.24 299.51 63.93" />
                        <polygon id="node_3" class="cls-1 anim-path" points="153.8 312.44 151.06 319.28 139.78 320.32 134.45 323.1 130.48 325.01 126.72 326.97 126.11 327.29 125.41 327.8 125 328.16 124.79 328.5 124.68 328.6 124.66 328.6 124.54 329.3 124.62 329.22 124.71 329.47 122.92 329.47 119.88 330.47 116.02 332.15 115.98 332.17 112.28 333.17 113.66 329.49 115.62 324.33 115.62 315.95 112.54 307.39 113.58 304.59 107.82 291.38 103.28 280.97 103.26 280.97 102.64 279.49 101.84 277.62 98.91 269.47 95.38 261.42 95.87 260.59 97.16 258.47 97.29 258.25 132.73 200.3 140.21 222.45 142.12 228.16 145.66 238.65 147.23 243.33 147.53 244.15 148.66 247.53 148.85 248.1 148.98 248.46 150.84 253.96 150.91 254.16 151.23 255.43 151.63 256.64 152.03 257.51 138.21 270.51 143.03 283.61 143.05 283.67 144.35 287.22 144.54 287.15 144.84 288.43 145.2 290.02 145.66 293.35 146.07 295.03 145.3 299.83 145.13 302.31 145.13 303.16 145.24 303.93 145.54 304.65 145.96 305.27 146.41 305.71 145.85 307.09 144.01 312.57 143.99 312.59 143.92 312.83 140.33 313.36 139.82 313.7 139.78 313.7 138 314.35 137.11 314.86 136.34 315.99 134.73 318.11 132.71 321.4 135.11 318.33 136.64 316.31 138.3 315.2 138.36 315.18 139.97 314.61 142.16 314.67 143.63 315.14 144.94 314.82 146.3 314.76 148.4 314.55 148.83 314.52 149.21 314.38 149.91 314.21 151.29 313.59 151.57 313.48 152.08 313.23 153.8 312.44" />
                        <polygon id="node_1" class="cls-1 anim-path" points="113.58 304.59 112.54 307.39 108.99 317.03 108.97 317.03 108.57 318.09 108.52 318.2 108.55 318.33 108.4 318.67 107.08 323.06 105.51 327.24 105.57 327.44 105.55 327.48 105.64 327.8 106.93 332.13 106.51 333.89 106.21 334.99 105.21 335.61 101.71 340.92 101.67 341 100.86 342.15 100.77 342.24 98.93 345.36 92.26 351.96 90.22 353.09 88.1 353.6 85.76 355.89 78.88 362.41 75.89 362.41 75.53 362.34 74.38 362.05 70.54 359.35 66.67 356.57 66.42 356.4 66.16 356.21 66.03 356.12 65.72 355.8 60.75 350.94 54.27 351.56 54.12 351.56 53.85 351.6 53.21 351.71 52.66 351.79 52.06 351.83 51.13 352.24 49.75 352.62 44.27 355.08 41.3 358.63 40.06 362 15.41 354.25 28.22 280.87 28.24 280.85 21.46 254.94 94.89 261.74 98.37 269.68 101.84 277.62 102.64 279.49 103.26 280.97 103.28 280.97 107.82 291.38 113.58 304.59" />
                        <polygon id="node_5" class="cls-1 anim-path" points="87.74 380.12 81.96 389.89 78.92 393.32 77.09 398.2 76.07 399.91 63.45 421.24 52.92 416.61 51.46 420.84 28.89 414.86 27.43 406.55 44.43 363.49 40.59 362.29 41.75 358.97 41.76 358.94 44.62 355.55 51.37 352.74 52.61 352.38 53.15 352.34 55.97 352.16 56.74 352.18 58.44 352.52 59.9 352.88 60.05 352.96 61.26 353.65 63.63 355.11 64.3 355.58 65.65 356.64 65.69 356.59 74.08 362.54 74.13 362.58 74.14 362.58 75.23 362.87 75.7 362.98 75.81 362.99 76.4 363.06 76.73 363.02 77.43 363.02 78.22 363.1 69.38 371.73 87.74 380.12" />
                        <polygon id="node_4" class="cls-1 anim-path" points="252.43 179.49 251.22 181.64 246.97 186.52 242.05 190.18 237.99 194.55 229.79 206.97 224.08 215.61 199.15 246.06 187.03 258.36 183.67 263.35 182.1 265.96 181.55 265.49 181.29 264.07 181.66 263.2 180.83 262.61 180.7 260.42 181.29 256.64 187.92 249.67 190.55 249.12 193.48 247.81 196.22 247.45 198.11 246.17 199.26 244.09 199.51 242.2 198.2 239.31 196.03 236.47 195.05 234.13 195.08 230.78 192.23 228.48 190.47 230.42 192.08 231.97 193.19 233.66 193.95 235.96 195.08 238.04 196.99 240.44 197.94 242.92 196.39 245.47 194.91 246.02 193.4 245.3 190.81 245.96 189.26 246.43 187.56 246.17 179.13 251.56 176.58 252.63 172.27 257.83 171.17 255.07 169.85 253.99 166.22 254.05 165.35 254.71 163.16 256.6 161.7 257.06 155.37 265.96 155.01 264.94 154.88 264.62 152.54 257.64 152.54 257.62 150.23 250.78 149.85 249.59 149.76 249.38 133.05 199.94 196.73 186.46 196.77 186.46 197.2 186.37 222 181.32 219.07 182 218.79 182.21 222 181.32 230.47 179.35 235.27 178.33 239.52 178.62 239.12 181.43 239.18 181.43 239.07 181.94 242.7 182 242.94 180.75 243.43 178.88 252.43 179.49" />
                     </g>
                  </svg>

                  <div id="ikr_toltipMove"></div>
               </div>
            </div>
         </div>
      </section>

      <!-- =============== MOBILE-ONLY BUTTON PANEL =============== -->
      <aside class="plot-panel">
         <h2 id="lot_select_message" class="panel-title">CHOOSE A NODE</h2>
         <div class="plot-buttons" id="buttonsContainer">
            <!-- Buttons injected by JS -->
         </div>
      </aside>
   </main>
<?php

   // Get the buffered output and clean (flush) the buffer
   return ob_get_clean();
}
